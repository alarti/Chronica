<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronica: Infinite Stories</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <link rel="apple-touch-icon" href="src/asset/logo.png">
    <link rel="icon" type="image/png" href="src/asset/logo.png">
</head>
<body>
    <div id="start-screen" class="hidden">
        <h1>Chronica: Infinite Stories</h1>
        <button id="new-story-btn">Start New Story</button>
        <button id="load-story-btn">Load Story</button>
        <div id="saved-stories-container" class="hidden">
            <h3>Saved Stories</h3>
            <ul id="saved-stories-list"></ul>
        </div>
        <div class="creator-credits">
            <p>Created by Alberto Arce</p>
            <a href="https://buymeacoffee.com/albertoarce" target="_blank" class="coffee-btn">Buy me a coffee</a>
        </div>
    </div>

    <div id="language-selector">
        <img src="src/asset/logo.png" alt="Chronica Logo" class="logo-large">
        <h2>Select Your Language</h2>
        <div class="flags">
            <button class="flag-button" data-lang="en"><img src="https://flagcdn.com/w80/gb.png" alt="English"></button>
            <button class="flag-button" data-lang="es"><img src="https://flagcdn.com/w80/es.png" alt="Español"></button>
            <button class="flag-button" data-lang="fr"><img src="https://flagcdn.com/w80/fr.png" alt="Français"></button>
            <button class="flag-button" data-lang="de"><img src="https://flagcdn.com/w80/de.png" alt="Deutsch"></button>
            <button class="flag-button" data-lang="zh"><img src="https://flagcdn.com/w80/cn.png" alt="中文"></button>
        </div>
    </div>

    <div id="fixed-logo-icon">
        <img src="src/asset/logo.png" alt="Chronica Icon">
    </div>
    <div id="game-container">
        <div id="game-ui-container">
            <div class="top-bar-wrapper">
                <div id="turn-indicator"></div>
                <div id="round-counter">Round: 0</div>
                <div id="timer">00:00</div>
            </div>
            <button id="menu-button">☰</button>
            <div id="progress-container">
                <span>Story Progress:</span>
                <div id="progress-bar">
                    <div id="progress-bar-fill"></div>
                </div>
                <span id="progress-percentage">0%</span>
            </div>
        </div>

        <div id="side-panel" class="hidden">
            <h3>Stats</h3>
            <!-- Stats will be rendered here -->
        </div>

        <div id="app">
            <!-- Game content is rendered here -->
        </div>
    </div>


    <div id="dice-roll-modal" class="hidden">
        <!--<img src="https/media1.giphy.com/media/KKnYitBECKgAVjIKph/giphy.gif" alt="Dice rolling...">-->
        <img src="src/asset/dice20.gif" alt="Dice rolling...">
        <div id="dice-result"></div>
    </div>

    <div id="new-story-dialog" class="hidden">
        <h3>Name Your New Saga</h3>
        <input type="text" id="new-story-title-input" placeholder="e.g., The Quest for the Lost Amulet">

        <div id="player-setup-container">
            <div class="player-option">
                <label for="player-count">Number of Players:</label>
                <select id="player-count" name="player-count">
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>
            <div id="player-names-container">
                <!-- Player name inputs will be generated here by JS -->
            </div>
        </div>

        <div id="time-limit-selection">
            <h4>Select Time Limit:</h4>
            <div class="time-options">
                <label>
                    <input type="radio" name="time-limit" value="3" checked> 3 Minutes
                </label>
                <label>
                    <input type="radio" name="time-limit" value="10"> 10 Minutes
                </label>
                <label>
                    <input type="radio" name="time-limit" value="0"> No Limit
                </label>
            </div>
        </div>
        <button id="new-story-submit-btn">Begin</button>
    </div>

    <div id="riddle-feedback" class="hidden"></div>

    <div id="end-screen" class="hidden">
        <h2>Time's Up!</h2>
        <p>Your adventure has come to an end.</p>
        <div id="final-stats">
            <!-- Final stats will be rendered here -->
        </div>
        <div class="end-screen-buttons">
            <button id="download-pdf-btn">Download Story as PDF</button>
            <button id="restart-btn">Play Again</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="module" src="src/main.js"></script>
</body>
</html>
